<div class="dark:bg-black-700 h-full">
    <main>
        <app-header></app-header>
        <div class="text-black-700 dark:text-gray-50 dark:bg-black-700 sm:w-11/12 xl:w-7/12 md:px-0 w-full px-5 pt-5 mx-auto font-sans">
            <!-- Player username -->
            <!-- <h1 class="text-[2.625rem] w-max font-semibold mx-auto md:mx-0 md:text-left bg-clip-text text-transparent bg-gradient-to-r from-green-500 via-blue-500 to-purple-500"
            [ngStyle]="{'color' : !this.member?.roles[0]?.color || ''}">{{ this.member.username }}</h1> -->
            <div class="flex flex-row items-center space-x-4">
                <h1 class="text-[2.625rem] w-max font-semibold mx-auto md:mx-0 md:text-left"
                    [ngStyle]="{'color' : this.usernameColor || 'currentColor' }">{{ this.member.username }}</h1>
                <!-- OG Heart -->
                <div *ngIf="this.member.og && this.member.roles.length === 0" class="flex text-xl text-red-600 select-none">
                    <span ngxTippy="OG Player">&#9829;</span>
                </div>
            </div>

            <!-- START: Roles & Ranks Bar -->
            <div class="flex flex-row flex-wrap items-start justify-center mb-1.5 md:justify-start whitespace-nowrap">
                <!-- Roles -->
                <div *ngFor="let role of this.member.roles"
                     class="flex-initial px-2 mt-1 mr-2.5 text-base rounded shadow-sm select-none w-max"
                     [ngStyle]="{'background-color': role?.background || '#FFFFFF', 'color': role?.color || '#000000'}">{{ role.name }}</div>
                <!-- OG Heart -->
                <div *ngIf="this.member.og && this.member.roles.length > 0" class="flex my-auto text-xl text-red-600 select-none">
                    <span ngxTippy="OG Player" class="my-auto">&#9829;</span>
                </div>
            </div>
            <!-- END: Roles & Ranks Bar -->

            <div class="md:flex-row flex flex-col justify-between">

                <div class="flex flex-col">
                    <!-- START: Player Profile Picture (Minecraft Head) -->
                    <div class="flex flex-none mx-auto my-3 bg-gray-100 bg-no-repeat rounded-lg shadow-lg select-none w-[16.25rem] h-[16.25rem] dark:bg-black-800 md:mx-0"
                         [ngStyle]="{'background-image': 'url(' + this.profilePicture + ')'}"></div>
                    <!-- END: Player Profile Picture (Minecraft Head) -->

                    <!-- START: Online Status -->
                    <div class="whitespace-nowrap flex justify-center">
                        <div class="w-2.5 h-2.5 my-auto mr-1.5 rounded-full shadow-md"
                             ngxTippy
                             tippyName="online-status"
                             [ngClass]="this.member.online ? 'bg-green-500' : 'bg-red-600'"></div>
                        <span>{{ this.member.online ? 'Online for' : 'Last seen' }}&nbsp;</span>
                        <span class="font-semibold cursor-default"
                              ngxTippy
                              tippyName="last-online-date">{{ this.member.lastOnline | timeago : this.member.online }}&nbsp;</span>
                        <!-- <span>on&nbsp;</span>
                        <span class="font-semibold">Server {{ this.server }}</span> -->
                    </div>
                    <!-- END: Online Status -->
                </div>

                <!-- START: Stats Summary Box -->
                <div class="md:py-8 md:mt-6 md:mb-12 md:mx-0 dark:bg-black-600 dark:ring-black ring-1 ring-gray-200 md:w-max flex justify-center w-full px-16 py-5 mx-auto my-5 text-2xl font-semibold bg-gray-100 rounded-md shadow-md">
                    <div class="gap-x-10 md:gap-x-28 gap-y-3 md:gap-y-5 grid grid-flow-col grid-rows-3 my-auto">
                        <div class="md:mx-0 table space-x-3">
                            <span class="md:text-4xl text-3xl">{{ this.member?.hockeyStatistics[0]?.goals || 0 }}</span>
                            <span class="dark:text-gray-300 text-gray-400"
                                  ngxTippy="Total Goals">goals</span>
                        </div>
                        <div class="md:mx-0 table space-x-3">
                            <span class="md:text-4xl text-3xl">{{ this.member?.hockeyStatistics[0]?.primaryAssists + this.member?.hockeyStatistics[0]?.secondaryAssists || 0 }}</span>
                            <span class="dark:text-gray-300 text-gray-400"
                                  ngxTippy="Total Assists">assists</span>
                        </div>
                        <div class="md:mx-0 table space-x-3">
                            <span class="md:text-4xl text-3xl">{{ this.member?.hockeyStatistics[0]?.primaryAssists + this.member?.hockeyStatistics[0]?.secondaryAssists + this.member?.hockeyStatistics[0]?.wins || 0 }}</span>
                            <span class="dark:text-gray-300 text-gray-400"
                                  ngxTippy="Total Points">points</span>
                        </div>
                        <div class="md:mx-0 table space-x-3">
                            <span class="md:text-4xl text-3xl">{{ this.member?.hockeyStatistics[0]?.wins || 0 }}</span>
                            <span class="dark:text-gray-300 text-gray-400"
                                  ngxTippy="Total Wins">wins</span>
                        </div>
                        <div class="md:mx-0 table space-x-3">
                            <span class="md:text-4xl text-3xl">{{ this.member?.hockeyStatistics[0]?.losses || 0 }}</span>
                            <span class="dark:text-gray-300 text-gray-400"
                                  ngxTippy="Total Losses">losses</span>
                        </div>
                        <div class="md:mx-0 table space-x-3">
                            <span class="md:text-4xl text-3xl">{{ this.calculateWinLoseRatio(this.member?.hockeyStatistics[0]?.wins, this.member?.hockeyStatistics[0]?.losses) || 0 | number: '1.2-2' }}</span>
                            <span class="dark:text-gray-300 text-gray-400"
                                  ngxTippy="Total Win-Lose Ratio">WL</span>
                        </div>
                    </div>
                </div>
                <!-- END: Stats Summary Box -->
            </div>

            <!-- START: Tabs -->
            <div class="text-md md:flex border-black-300 dark:border-gray-100 mt-7 flex-row flex-wrap hidden border-b select-none">
                <!-- START: Stats Tab -->
                <div id="stat-tab" class="px-5 py-1 text-center rounded-t-lg cursor-pointer min-w-[9rem] focus:outline-none"
                     (click)="changeTab('')"
                     tabindex="0"
                     [ngClass]="this.tab === 'stats' 
                                ? 'border-b-2 dark:bg-black-100 bg-opacity-10 border-black-300 dark:border-gray-100 bg-black' 
                                : 'hover:border-b-2 hover:bg-black dark:hover:bg-gray-100 dark:hover:bg-opacity-10 hover:bg-opacity-5 dark:border-gray-50 hover:border-black-200
                                   focus:border-b-2 focus:bg-black dark:focus:bg-gray-100 dark:focus:bg-opacity-10 focus:bg-opacity-5 focus:border-black-200' ">
                    <span>STATISTICS</span>
                </div>
                <!-- END: Stats Tab -->

                <!-- START: Awards Tab -->
                <div id="awards-tab" class="px-5 py-1 text-center rounded-t-lg cursor-pointer min-w-[9rem] focus:outline-none"
                     (click)="changeTab('awards')"
                     tabindex="0"
                     [ngClass]="this.tab === 'awards' 
                                ? 'border-b-2 dark:bg-black-100 bg-opacity-10 border-black-300 dark:border-gray-100 bg-black' 
                                : 'hover:border-b-2 hover:bg-black dark:hover:bg-gray-100 dark:hover:bg-opacity-10 hover:bg-opacity-5 dark:border-gray-50 hover:border-black-200
                                   focus:border-b-2 focus:bg-black dark:focus:bg-gray-100 dark:focus:bg-opacity-10 focus:bg-opacity-5 focus:border-black-200' ">
                    <span>AWARDS</span>
                </div>
                <!-- END: Awards Tab -->

                <!-- START: Infractions Tab -->
                <div id="infractions-tab" class="px-5 py-1 text-center rounded-t-lg cursor-pointer min-w-[9rem] focus:outline-none"
                     (click)="changeTab('infractions')"
                     tabindex="0"
                     [ngClass]="this.tab === 'infractions' 
                                ? 'border-b-2 dark:bg-black-100 bg-opacity-10 border-black-300 dark:border-gray-100 bg-black' 
                                : 'hover:border-b-2 hover:bg-black dark:hover:bg-gray-100 dark:hover:bg-opacity-10 hover:bg-opacity-5 dark:border-gray-50 hover:border-black-200
                                   focus:border-b-2 focus:bg-black dark:focus:bg-gray-100 dark:focus:bg-opacity-10 focus:bg-opacity-5 focus:border-black-200' ">
                    <span>INFRACTIONS</span>
                </div>
                <!-- END: Infractions Tab -->
            </div>
            <!-- END: Tabs -->

            <!-- START: Tabs Content -->
            <div class="md:flex hidden">
                <app-stats [ngClass]="this.tab === 'stats' ? 'block' : 'hidden'"
                           [member]="this.member"
                           [isError]="this.isError"
                           [statisticsText]="this.errorMessage"
                           class="w-full mt-10"></app-stats>
                <app-awards [ngClass]="this.tab === 'trophies' ? 'block' : 'hidden'"
                            [awards]="this.member"
                            class="w-full mt-10"></app-awards>
                <app-infractions [ngClass]="this.tab === 'infractions' ? 'block' : 'hidden'"
                                 [member]="this.member"
                                 class="w-full mt-10"></app-infractions>
            </div>
            <!-- END: Tabs Content -->
        </div>
    </main>

    <!-- START: Footer -->
    <app-footer></app-footer>
    <!-- END: Footer -->
</div>

<style>
    main {
        min-height: calc(100vh - 19.0625rem);
    }

    app-footer {
        height: 19.0625rem;
    }
</style>